{% extends "bootstrap_5_layout.html" %}
{% set active_page = "reservations" %}

{% block content %}

    <h1>Reserve a Study Room</h1>

    <p class="lead">Here are your reservations:</p>

    <div class="table-responsive">
        <table class="table table-hover text-center">
            <thead>
                <tr>
                    <th scope="col">Date</th>
                    <th scope="col">Time</th>
                    <th scope="col">Room</th>
                    <th scope="col"></th>
                </tr>
            </thead>
            <tbody>
            {% for day in schedule %} <!--7 dates-->
                {% for room_num in range(day["data"] | length) %} <!--12 rooms-->
                    {% for time in day["data"][room_num].keys() %} <!--8 times-->
                        {% if day["data"][room_num][time] == ""%}
                            <tr>
                                <td>
                                    {{ day.date }}
                                </td>
                                <td>
                                    {{ time }}
                                </td>
                                <td>
                                    {{room_num + 1}}
                                </td>
                                <td>
                                    <button class="reserve-btn">Reserve Time</button>
                                </td>
                            </tr>
                        {% endif %}
                    {% endfor %}
                {% endfor %}
            {% endfor %}
            </tbody>
        </table>
    </div>

    <script>
        document.querySelectorAll(".reserve-btn").forEach(b => {
            b.addEventListener("click", (e) => {
                let tr = e.target.parentNode.parentNode;
                console.log(tr.children);
            })
        })
    </script>

{% endblock %}
